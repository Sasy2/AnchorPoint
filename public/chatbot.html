<!DOCTYPE html>
<html class="light" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>AnchorPoint - Mindful Coach</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#427cf0",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "1rem",
                        "xl": "1.5rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .chat-message {
            animation: fadeInUp 0.3s ease-out;
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .typing-indicator {
            animation: pulse 1.5s ease-in-out infinite;
        }
    </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-[#111318] dark:text-gray-200">
<div class="relative flex min-h-screen w-full">
<!-- Side Navigation -->
<aside class="flex h-screen w-64 flex-col border-r border-gray-200 dark:border-gray-800 bg-white dark:bg-background-dark p-4 sticky top-0">
<div class="flex h-full flex-col justify-between">
<div class="flex flex-col gap-4">
<div class="flex items-center gap-3">
<div class="w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
<span class="material-symbols-outlined text-primary">psychology</span>
</div>
<div class="flex flex-col">
<h1 class="text-base font-medium leading-normal text-[#111318] dark:text-white">Mindful Coach</h1>
<p class="text-sm font-normal leading-normal text-[#616f89] dark:text-gray-400">Your AI companion</p>
</div>
</div>
<nav class="mt-4 flex flex-col gap-2">
<a class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/20 transition-colors" href="index.html">
<span class="material-symbols-outlined text-[#111318] dark:text-gray-300">home</span>
<p class="text-sm font-medium leading-normal text-[#111318] dark:text-gray-300">Home</p>
</a>
<a class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/20 transition-colors" href="activities.html">
<span class="material-symbols-outlined text-[#111318] dark:text-gray-300">grass</span>
<p class="text-sm font-medium leading-normal text-[#111318] dark:text-gray-300">Activities</p>
</a>
<a class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg bg-primary/20 text-primary dark:bg-primary/30 dark:text-primary" href="chatbot.html">
<span class="material-symbols-outlined !fill-1">psychology</span>
<p class="text-sm font-medium leading-normal">Mindful Coach</p>
</a>
</nav>
</div>
<div class="flex flex-col gap-1">
<button id="clear-chat-btn" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 transition-colors text-red-600 dark:text-red-400">
<span class="material-symbols-outlined">delete</span>
<p class="text-sm font-medium leading-normal">Clear Chat</p>
</button>
</div>
</div>
</aside>

<!-- Main Chat Area -->
<main class="flex-1 flex flex-col">
<!-- Chat Header -->
<div class="border-b border-gray-200 dark:border-gray-800 p-4">
<div class="flex items-center justify-between">
<div class="flex items-center gap-3">
<div class="w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center">
<span class="material-symbols-outlined text-primary">psychology</span>
</div>
<div>
<h1 class="text-lg font-bold text-[#111318] dark:text-white">Mindful Coach</h1>
<p class="text-sm text-[#616f89] dark:text-gray-400">I'm here to support you on your mental health journey</p>
</div>
</div>
<div class="flex items-center gap-2">
<span id="connection-status" class="flex items-center gap-1 text-sm text-green-600 dark:text-green-400">
<span class="w-2 h-2 bg-green-500 rounded-full"></span>
Online
</span>
</div>
</div>
</div>

<!-- Chat Messages -->
<div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4">
<!-- Welcome message -->
<div class="chat-message flex items-start gap-3">
<div class="w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
<span class="material-symbols-outlined text-primary text-sm">psychology</span>
</div>
<div class="bg-white dark:bg-gray-800 rounded-lg p-3 max-w-md">
<p class="text-sm text-[#111318] dark:text-white">Hello! I'm your Mindful Coach. I'm here to provide supportive guidance and help you navigate your mental health journey. How are you feeling today?</p>
<p class="text-xs text-[#616f89] dark:text-gray-400 mt-1">Just now</p>
</div>
</div>
</div>

<!-- Chat Input -->
<div class="border-t border-gray-200 dark:border-gray-800 p-4">
<div class="flex items-end gap-3">
<div class="flex-1">
<textarea id="message-input" class="w-full resize-none border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-800 text-[#111318] dark:text-white placeholder:text-[#616f89] dark:placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="Type your message here..." rows="2"></textarea>
</div>
<button id="send-btn" class="flex items-center justify-center w-12 h-12 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
<span class="material-symbols-outlined">send</span>
</button>
</div>
<div class="flex items-center justify-between mt-2">
<div class="flex items-center gap-4">
<button class="flex items-center gap-1 text-xs text-[#616f89] dark:text-gray-400 hover:text-primary transition-colors">
<span class="material-symbols-outlined text-sm">mood</span>
Suggestions
</button>
</div>
<p class="text-xs text-[#616f89] dark:text-gray-400">Remember: I'm an AI assistant, not a replacement for professional therapy</p>
</div>
</div>
</main>
</div>

<script>
class Chatbot {
  constructor() {
    this.messageInput = document.getElementById('message-input');
    this.sendBtn = document.getElementById('send-btn');
    this.chatMessages = document.getElementById('chat-messages');
    this.clearChatBtn = document.getElementById('clear-chat-btn');
    
    this.isTyping = false;
    this.init();
  }

  init() {
    this.setupEventListeners();
  }

  setupEventListeners() {
    // Send message
    this.sendBtn.addEventListener('click', () => this.sendMessage());
    this.messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        this.sendMessage();
      }
    });

    // Clear chat
    this.clearChatBtn.addEventListener('click', () => this.clearChat());

    // Auto-resize textarea
    this.messageInput.addEventListener('input', () => {
      this.messageInput.style.height = 'auto';
      this.messageInput.style.height = this.messageInput.scrollHeight + 'px';
    });
  }

  async sendMessage() {
    const message = this.messageInput.value.trim();
    if (!message || this.isTyping) return;

    // Add user message to chat
    this.addMessage(message, 'user');
    this.messageInput.value = '';
    this.messageInput.style.height = 'auto';

    // Show typing indicator
    this.showTypingIndicator();

    // Simulate AI response with timeout
    setTimeout(() => {
      this.hideTypingIndicator();
      const response = this.generateAIResponse(message);
      this.addMessage(response, 'assistant');
    }, 1000 + Math.random() * 2000);
  }

  generateAIResponse(message) {
    const responses = {
      'anxious': "I understand that anxiety can feel overwhelming. Let's try some calming breathing exercises. Take a deep breath in for 4 counts, hold for 4 counts, breathe out for 4 counts, and hold for 4 counts. This is called box breathing and can help calm your nervous system.",
      'sad': "I'm sorry you're feeling sad. It's okay to feel this way sometimes. Consider trying the 'Three Good Things' exercise - write down three things that went well today, no matter how small. This practice can help shift your perspective.",
      'angry': "Anger is a valid emotion. Let's channel it constructively. Try the 5-4-3-2-1 grounding technique: Name 5 things you can see, 4 you can touch, 3 you can hear, 2 you can smell, and 1 you can taste. This helps bring you back to the present moment.",
      'tired': "Feeling tired can affect your mental health. Consider doing some gentle movement or stretching. Even 5 minutes of movement can boost your energy. Also, try the body scan meditation - slowly scan your body from head to toe, noticing sensations.",
      'happy': "That's wonderful to hear! When we're feeling good, it's a great time to build positive habits. Consider journaling about what made you feel this way, or share your joy with someone close to you.",
      'confused': "It's okay to feel confused. Sometimes our minds need time to process. Try the RAIN technique: Recognize what you're feeling, Allow it to be there, Investigate it with curiosity, and Nurture yourself with self-compassion.",
      'excited': "Excitement is great energy! Harness it by setting an intention for today. What would you like to achieve with this energy? Consider channeling it into a creative activity or something meaningful to you.",
      'grateful': "Gratitude is powerful! Consider creating a gratitude list or letter. Research shows that expressing gratitude regularly can boost your overall well-being.",
      'calm': "I'm glad you're feeling calm. This is a wonderful state for reflection and planning. Consider using this peaceful moment to set intentions for your day or engage in mindful activities."
    };

    // Check for keyword matches
    const lowerMessage = message.toLowerCase();
    for (const [key, response] of Object.entries(responses)) {
      if (lowerMessage.includes(key)) {
        return response;
      }
    }

    // Default supportive response
    return "Thank you for sharing that with me. It's important to acknowledge how you're feeling. Let me suggest some approaches that might help:\n\n1. **Breathing Exercise**: Try the 4-7-8 breathing technique - inhale for 4 counts, hold for 7, exhale for 8. Repeat 4 times.\n\n2. **Grounding**: Use the 5-4-3-2-1 technique - notice 5 things you see, 4 you can touch, 3 you hear, 2 you smell, 1 you can taste.\n\n3. **Self-compassion**: Remind yourself that it's okay to feel this way. You're human, and all emotions are valid.\n\nWould you like to explore any of these techniques further, or is there something specific I can help you with?";
  }

  addMessage(content, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'chat-message flex items-start gap-3';
    
    if (sender === 'user') {
      messageDiv.innerHTML = `
        <div class="flex-1"></div>
        <div class="bg-primary text-white rounded-lg p-3 max-w-md">
          <p class="text-sm">${this.escapeHtml(content)}</p>
          <p class="text-xs opacity-70 mt-1">${this.getCurrentTime()}</p>
        </div>
        <div class="w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
          <span class="material-symbols-outlined text-primary text-sm">person</span>
        </div>
      `;
    } else {
      messageDiv.innerHTML = `
        <div class="w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
          <span class="material-symbols-outlined text-primary text-sm">psychology</span>
        </div>
        <div class="bg-white dark:bg-gray-800 rounded-lg p-3 max-w-md">
          <p class="text-sm text-[#111318] dark:text-white">${this.formatAIResponse(content)}</p>
          <p class="text-xs text-[#616f89] dark:text-gray-400 mt-1">${this.getCurrentTime()}</p>
        </div>
      `;
    }
    
    this.chatMessages.appendChild(messageDiv);
    this.scrollToBottom();
  }

  showTypingIndicator() {
    this.isTyping = true;
    this.sendBtn.disabled = true;
    
    const typingDiv = document.createElement('div');
    typingDiv.id = 'typing-indicator';
    typingDiv.className = 'chat-message flex items-start gap-3';
    typingDiv.innerHTML = `
      <div class="w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center flex-shrink-0">
        <span class="material-symbols-outlined text-primary text-sm">psychology</span>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-lg p-3">
        <div class="flex items-center gap-1">
          <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator"></div>
          <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style="animation-delay: 0.2s;"></div>
          <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style="animation-delay: 0.4s;"></div>
        </div>
      </div>
    `;
    
    this.chatMessages.appendChild(typingDiv);
    this.scrollToBottom();
  }

  hideTypingIndicator() {
    this.isTyping = false;
    this.sendBtn.disabled = false;
    
    const typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) {
      typingIndicator.remove();
    }
  }

  async clearChat() {
    if (confirm('Are you sure you want to clear the chat history?')) {
      const welcomeMessage = this.chatMessages.querySelector('.chat-message');
      this.chatMessages.innerHTML = '';
      this.chatMessages.appendChild(welcomeMessage);
    }
  }

  scrollToBottom() {
    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
  }

  getCurrentTime() {
    return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  }

  escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  formatAIResponse(text) {
    // Format AI response with better line breaks
    return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
  }
}

// Initialize chatbot when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  // Initialize chatbot
  new Chatbot();
  
  // Dark mode functionality
  if (localStorage.getItem('darkMode') === 'true') {
    document.documentElement.classList.add('dark');
  }
});
</script>
</body>
</html>